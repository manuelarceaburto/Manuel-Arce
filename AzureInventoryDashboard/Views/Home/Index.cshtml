@model IEnumerable<Customer>
@{
    ViewData["Title"] = "Select Customer";
}

<div class="page-header">
    <h1>Welcome to Azure Inventory Dashboard</h1>
    <a asp-controller="Customer" asp-action="Create" class="btn btn-primary">
        <span style="font-size: 1.2rem; margin-right: 0.5rem;">+</span> Add New Customer
    </a>
</div>

@if (!Model.Any())
{
    <div class="card text-center" style="padding: 3rem;">
        <h3>No Customers Found</h3>
        <p class="text-muted mt-2">Get started by adding your first customer</p>
        <div class="mt-3">
            <a asp-controller="Customer" asp-action="Create" class="btn btn-primary btn-lg">
                Add Customer
            </a>
        </div>
    </div>
}
else
{
    <p class="text-muted mb-4">Select a customer to view their Azure resources</p>

    <div class="customer-grid">
        @foreach (var customer in Model)
        {
            <div class="card customer-card" onclick="window.location.href='@Url.Action("Index", "Inventory", new { customerId = customer.Id })'">
                <h3>@customer.Name</h3>
                <p><strong>Tenant ID:</strong> @customer.TenantId</p>
                <p><strong>Resources:</strong> @customer.Resources.Count</p>
                <p>
                    <strong>Last Synced:</strong>
                    @if (customer.LastSyncedAt.HasValue)
                    {
                        <span data-date="@customer.LastSyncedAt.Value.ToString("o")">
                            @customer.LastSyncedAt.Value.ToString("g")
                        </span>
                    }
                    else
                    {
                        <span class="text-warning">Never</span>
                    }
                </p>
                <div class="mt-3">
                    <button onclick="event.stopPropagation(); syncCustomerResources(@customer.Id, '@customer.Name')"
                            class="btn btn-success btn-sm">
                        Sync Resources
                    </button>
                    <a href="@Url.Action("Index", "Inventory", new { customerId = customer.Id })"
                       class="btn btn-primary btn-sm" onclick="event.stopPropagation()">
                        View Inventory
                    </a>
                </div>
            </div>
        }
    </div>
}
